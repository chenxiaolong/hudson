From 1a0ce1d7251afcc1921201665d5d109df0dcb027 Mon Sep 17 00:00:00 2001
From: Xiao-Long Chen <chenxiaolong@cxl.epac.to>
Date: Tue, 12 Nov 2013 15:14:39 -0500
Subject: [PATCH] Use ccache version 3

Change-Id: Ib8c04c81039c12833d73a9a34716b2278e54e718
---
 core/combo/select.mk |  2 +-
 core/tasks/kernel.mk | 10 +---------
 2 files changed, 2 insertions(+), 10 deletions(-)

diff --git a/core/combo/select.mk b/core/combo/select.mk
index e485d00..cba9987 100644
--- a/core/combo/select.mk
+++ b/core/combo/select.mk
@@ -83,7 +83,7 @@ ifneq ($(USE_CCACHE),)
   ifeq ($(HOST_OS)-$(BUILD_OS),windows-linux)
     CCACHE_HOST_TAG := linux-$(BUILD_ARCH)
   endif
-  ccache := prebuilts/misc/$(CCACHE_HOST_TAG)/ccache/ccache
+  ccache := /usr/bin/ccache
   # Check that the executable is here.
   ccache := $(strip $(wildcard $(ccache)))
   ifdef ccache
diff --git a/core/tasks/kernel.mk b/core/tasks/kernel.mk
index b09e5d1..f5eace7 100644
--- a/core/tasks/kernel.mk
+++ b/core/tasks/kernel.mk
@@ -132,14 +132,7 @@ endef
 ifeq ($(TARGET_ARCH),arm)
     ifneq ($(USE_CCACHE),)
      # search executable
-      ccache =
-      ifneq ($(strip $(wildcard $(ANDROID_BUILD_TOP)/prebuilts/misc/$(HOST_PREBUILT_EXTRA_TAG)/ccache/ccache)),)
-        ccache := $(ANDROID_BUILD_TOP)/prebuilts/misc/$(HOST_PREBUILT_EXTRA_TAG)/ccache/ccache
-      else
-        ifneq ($(strip $(wildcard $(ANDROID_BUILD_TOP)/prebuilts/misc/$(HOST_PREBUILT_TAG)/ccache/ccache)),)
-          ccache := $(ANDROID_BUILD_TOP)/prebuilts/misc/$(HOST_PREBUILT_TAG)/ccache/ccache
-        endif
-      endif
+      ccache = /usr/bin/ccache
     endif
     ifneq ($(TARGET_KERNEL_CUSTOM_TOOLCHAIN),)
         ifeq ($(HOST_OS),darwin)
@@ -150,7 +143,6 @@ ifeq ($(TARGET_ARCH),arm)
     else
         ARM_CROSS_COMPILE:=CROSS_COMPILE="$(ccache) $(ARM_EABI_TOOLCHAIN)/arm-eabi-"
     endif
-    ccache = 
 endif
 
 ifeq ($(HOST_OS),darwin)
-- 
1.8.4.2

